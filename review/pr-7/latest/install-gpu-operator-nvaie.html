<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NVIDIA AI Enterprise &mdash; gpu-operator 23.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" type="text/css" />
      <link rel="stylesheet" href="_static/omni-style.css" type="text/css" />
      <link rel="stylesheet" href="_static/api-styles.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/mermaid-init.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="_static/design-tabs.js"></script>
        <script src="_static/version.js"></script>
        <script src="_static/social-media.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="GPU Operator on OpenShift" href="openshift/contents.html" />
    <link rel="prev" title="NVIDIA vGPU" href="install-gpu-operator-vgpu.html" />
 


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/nvidia-logo-white.png" class="logo" alt="Logo"/>
          </a>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">NVIDIA GPU Operator</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About the Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="platform-support.html">Platform Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-driver-upgrades.html">GPU Driver Upgrades</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-gpu-operator-vgpu.html">NVIDIA vGPU</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NVIDIA AI Enterprise</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-gpu-operator">Installing GPU Operator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-gpu-operator-with-the-nvidia-datacenter-driver">Installing GPU Operator with the NVIDIA Datacenter Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-nls-client-license-token">Updating NLS client license token</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="openshift/contents.html">GPU Operator on OpenShift</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-operator-mig.html">GPU Operator with MIG</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-sharing.html">Time-Slicing GPUs in Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-operator-rdma.html">GPUDirect RDMA and GPUDirect Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-operator-kubevirt.html">GPU Operator with KubeVirt</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Licenses and Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="archive.html">Archive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Related Projects</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/overview.html">NVIDIA Container Toolkit</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/kubernetes/install-k8s.html">Kubernetes with GPUs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/gpu-telemetry/dcgm-exporter.html">GPU Telemetry</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/mig/mig.html">Multi-Instance GPU</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/driver-containers/overview.html">Driver Containers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gpu-operator</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
<li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
<li>NVIDIA AI Enterprise</li>
<li class="wy-breadcrumbs-aside">

  <span>&nbsp;</span>
</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nvidia-ai-enterprise">
<span id="install-gpu-operator-nvaie"></span><h1>NVIDIA AI Enterprise<a class="headerlink" href="#nvidia-ai-enterprise" title="Permalink to this headline"></a></h1>
<p>NVIDIA AI Enterprise is an end-to-end, cloud-native suite of AI and data analytics software, optimized, certified, and supported by NVIDIA with  NVIDIA-Certified  Systems. Additional information can be found at the <a class="reference external" href="https://www.nvidia.com/en-us/data-center/products/ai-enterprise-suite/#benefits">NVIDIA AI Enterprise web page</a>.</p>
<p>NVIDIA AI Enterprise customers have access to a pre-configured GPU Operator within the NVIDIA Enterprise Catalog.
The GPU Operator is pre-configured to simplify the provisioning experience with NVIDIA AI Enterprise deployments.</p>
<p>The pre-configured GPU Operator differs from the GPU Operator in the public NGC catalog. The differences are:</p>
<blockquote>
<div><ul class="simple">
<li><p>It is configured to use a prebuilt vGPU driver image (Only available to NVIDIA AI Enterprise customers)</p></li>
<li><p>It is configured to use the <a class="reference external" href="https://docs.nvidia.com/license-system/latest/">NVIDIA License System (NLS)</a></p></li>
</ul>
</div></blockquote>
<p>This page provides documentation for the following configurations:</p>
<ul class="simple">
<li><p>Kubernetes on bare metal and on vSphere VMs with GPU passthrough and vGPU.</p></li>
<li><p>VMware vSphere with Tanzu.</p></li>
<li><p>Red Hat Openshift on bare metal and on vSphere VMs with GPU passthrough and vGPU.</p></li>
</ul>
<p>The following sections are applicable to the first two configurations and describe how to deploy the GPU Operator using the Helm Chart.
For Red Hat Openshift configurations, please follow this procedure <cite>NVIDIA AI Enterprise with OpenShift &lt;nvaie-ocp&gt;</cite>.</p>
<section id="installing-gpu-operator">
<h2>Installing GPU Operator<a class="headerlink" href="#installing-gpu-operator" title="Permalink to this headline"></a></h2>
<p>To install GPU Operator with NVIDIA AI Enterprise, apply the following steps.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also use the following <a class="reference external" href="https://raw.githubusercontent.com/NVIDIA/gpu-operator/master/scripts/install-gpu-operator-nvaie.sh">script</a>, which automates the below installation instructions.</p>
</div>
<p>Create the <code class="docutils literal notranslate"><span class="pre">gpu-operator</span></code> namespace:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>kubectl create namespace gpu-operator
</pre></div>
</div>
<p>Create an empty vGPU license configuration file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo touch gridd.conf
</pre></div>
</div>
<p>Generate and download a NLS client license token. Please refer to Section 4.6 of the <a class="reference external" href="https://docs.nvidia.com/license-system/latest/pdf/nvidia-license-system-user-guide.pdf">NLS User Guide</a> for instructions.</p>
<p>Rename the NLS client license token that you downloaded to <code class="docutils literal notranslate"><span class="pre">client_configuration_token.tok</span></code>.</p>
<p>Create the <code class="docutils literal notranslate"><span class="pre">licensing-config</span></code> ConfigMap object in the <code class="docutils literal notranslate"><span class="pre">gpu-operator</span></code> namespace. Both the vGPU license
configuration file and the NLS client license token will be added to this ConfigMap:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>kubectl create configmap licensing-config <span class="se">\</span>
    -n gpu-operator --from-file<span class="o">=</span>gridd.conf --from-file<span class="o">=</span>&lt;path&gt;/client_configuration_token.tok
</pre></div>
</div>
<p>Create an image pull secret in the <code class="docutils literal notranslate"><span class="pre">gpu-operator</span></code> namespace for the private
registry that contains the containerized NVIDIA vGPU software graphics driver for Linux for
use with NVIDIA GPU Operator:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set the registry secret name:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">export</span> <span class="nv">REGISTRY_SECRET_NAME</span><span class="o">=</span>ngc-secret
</pre></div>
</div>
<ul class="simple">
<li><p>Set the private registry name:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">export</span> <span class="nv">PRIVATE_REGISTRY</span><span class="o">=</span>nvcr.io/nvaie
</pre></div>
</div>
<ul class="simple">
<li><p>Create an image pull secret in the <code class="docutils literal notranslate"><span class="pre">gpu-operator</span></code> namespace with the registry
secret name and the private registry name that you set. Replace <code class="docutils literal notranslate"><span class="pre">password</span></code>,
and <code class="docutils literal notranslate"><span class="pre">email-address</span></code> with your NGC API key and email address respectively:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>kubectl create secret docker-registry <span class="si">${</span><span class="nv">REGISTRY_SECRET_NAME</span><span class="si">}</span> <span class="se">\</span>
    --docker-server<span class="o">=</span><span class="si">${</span><span class="nv">PRIVATE_REGISTRY</span><span class="si">}</span> <span class="se">\</span>
    --docker-username<span class="o">=</span><span class="s1">&#39;$oauthtoken&#39;</span> <span class="se">\</span>
    --docker-password<span class="o">=</span><span class="s1">&#39;&lt;password&gt;&#39;</span> <span class="se">\</span>
    --docker-email<span class="o">=</span><span class="s1">&#39;&lt;email-address&gt;&#39;</span> <span class="se">\</span>
    -n gpu-operator
</pre></div>
</div>
</div></blockquote>
<p>Add the NVIDIA AI Enterprise Helm repository, where password is the NGC API key for accessing the NVIDIA Enterprise Collection that you generated:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>helm repo add nvaie https://helm.ngc.nvidia.com/nvaie <span class="se">\</span>
  --username<span class="o">=</span><span class="s1">&#39;$oauthtoken&#39;</span> --password<span class="o">=</span><span class="s1">&#39;&lt;password&gt;&#39;</span> <span class="se">\</span>
  <span class="o">&amp;&amp;</span> helm repo update
</pre></div>
</div>
<p>Install the NVIDIA GPU Operator:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>helm install --wait gpu-operator nvaie/gpu-operator-3-0 -n gpu-operator
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>in case you need to deploy the Helm chart with some customizations, please refer to this link: <a class="reference internal" href="installation.html#gpu-operator-helm-chart-options"><span class="std std-ref">Chart Customization Options</span></a></p>
</div>
</section>
<section id="installing-gpu-operator-with-the-nvidia-datacenter-driver">
<h2>Installing GPU Operator with the NVIDIA Datacenter Driver<a class="headerlink" href="#installing-gpu-operator-with-the-nvidia-datacenter-driver" title="Permalink to this headline"></a></h2>
<p>To install GPU Operator on baremetal with the NVIDIA Datacenter Driver, apply the following steps.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also use the following <a class="reference external" href="https://raw.githubusercontent.com/NVIDIA/gpu-operator/master/scripts/install-gpu-operator-nvaie.sh">script</a>, which automates the below installation instructions.</p>
</div>
<p>Create the <code class="docutils literal notranslate"><span class="pre">gpu-operator</span></code> namespace:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>kubectl create namespace gpu-operator
</pre></div>
</div>
<p>Create an image pull secret in the <code class="docutils literal notranslate"><span class="pre">gpu-operator</span></code> namespace for the private
registry that contains the NVIDIA GPU Operator:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set the registry secret name:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">export</span> <span class="nv">REGISTRY_SECRET_NAME</span><span class="o">=</span>ngc-secret
</pre></div>
</div>
<ul class="simple">
<li><p>Set the private registry name:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">export</span> <span class="nv">PRIVATE_REGISTRY</span><span class="o">=</span>nvcr.io/nvaie
</pre></div>
</div>
<ul class="simple">
<li><p>Create an image pull secret in the <code class="docutils literal notranslate"><span class="pre">gpu-operator</span></code> namespace with the registry
secret name and the private registry name that you set. Replace <code class="docutils literal notranslate"><span class="pre">password</span></code>,
and <code class="docutils literal notranslate"><span class="pre">email-address</span></code> with your NGC API key and email address respectively:</p></li>
</ul>
</div></blockquote>
<p>Add the NVIDIA AI Enterprise Helm repository, where password is the NGC API key for accessing the NVIDIA Enterprise Collection that you generated:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>helm repo add nvaie https://helm.ngc.nvidia.com/nvaie <span class="se">\</span>
  --username<span class="o">=</span><span class="s1">&#39;$oauthtoken&#39;</span> --password<span class="o">=</span><span class="s1">&#39;&lt;password&gt;&#39;</span> <span class="se">\</span>
  <span class="o">&amp;&amp;</span> helm repo update
</pre></div>
</div>
<p>Install the NVIDIA GPU Operator:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>helm install --wait gpu-operator nvaie/gpu-operator-3-0 -n gpu-operator <span class="se">\</span>
  --set driver.repository<span class="o">=</span>nvcr.io/nvidia <span class="se">\</span>
  --set driver.image<span class="o">=</span>driver <span class="se">\</span>
  --set driver.version<span class="o">=</span><span class="m">525</span>.60.13 <span class="se">\</span>
  --set driver.licensingConfig.configMapName<span class="o">=</span><span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case you need to deploy the Helm chart with some customizations, please refer to this link: <a class="reference internal" href="installation.html#gpu-operator-helm-chart-options"><span class="std std-ref">Chart Customization Options</span></a></p>
</div>
</section>
<section id="updating-nls-client-license-token">
<h2>Updating NLS client license token<a class="headerlink" href="#updating-nls-client-license-token" title="Permalink to this headline"></a></h2>
<p>In case the NLS client license token needs to be updated, please use the following procedure:</p>
<p>Create an empty vGPU license configuration file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo touch gridd.conf
</pre></div>
</div>
<p>Generate and download a new NLS client license token. Please refer to Section 4.6 of the <a class="reference external" href="https://docs.nvidia.com/license-system/latest/pdf/nvidia-license-system-user-guide.pdf">NLS User Guide</a> for instructions.</p>
<p>Rename the NLS client license token that you downloaded to <code class="docutils literal notranslate"><span class="pre">client_configuration_token.tok</span></code>.</p>
<p>Create a new <code class="docutils literal notranslate"><span class="pre">licensing-config-new</span></code> ConfigMap object in the <code class="docutils literal notranslate"><span class="pre">gpu-operator</span></code> namespace (make sure the name of the configmap is not already used in the kubernetes cluster). Both the vGPU license configuration file and the NLS client license token will be added to this ConfigMap:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>kubectl create configmap licensing-config-new <span class="se">\</span>
    -n gpu-operator --from-file<span class="o">=</span>gridd.conf --from-file<span class="o">=</span>&lt;path&gt;/client_configuration_token.tok
</pre></div>
</div>
<p>Edit the clusterpolicies by using the command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>kubectl edit clusterpolicies.nvidia.com
</pre></div>
</div>
<p>Go to the driver section and replace the following argument:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">licensingConfig:</span>
<span class="go">    configMapName: licensing-config</span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">licensingConfig:</span>
<span class="go">    configMapName: licensing-config-new</span>
</pre></div>
</div>
<p>Write and exit from the kubectl edit session (you can use :qw for instance if vi utility is used)</p>
<p>GPU Operator will redeploy sequentially all the driver pods with this new licensing information.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023, NVIDIA.
      <span class="lastupdated">Last updated on Mar 06, 2023.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>