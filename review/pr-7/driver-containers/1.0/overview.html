<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Overview &mdash; driver-containers 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" type="text/css" />
      <link rel="stylesheet" href="_static/omni-style.css" type="text/css" />
      <link rel="stylesheet" href="_static/api-styles.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/mermaid-init.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="_static/design-tabs.js"></script>
        <script src="_static/version.js"></script>
        <script src="_static/social-media.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="NVIDIA Driver Containers" href="index.html" />
 


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/nvidia-logo-white.png" class="logo" alt="Logo"/>
          </a>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">NVIDIA Driver Containers</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pre-requisites">Pre-requisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quickstart">Quickstart</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ubuntu-18-04">Ubuntu 18.04</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#container-images">Container Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#licenses-and-contributing">Licenses and Contributing</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Related Projects</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/index.html">NVIDIA Container Toolkit</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/gpu-operator/index.html">NVIDIA GPU Operator</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/kubernetes/install-k8s.html">Kubernetes with GPUs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/gpu-telemetry/dcgm-exporter.html">GPU Telemetry</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/mig/mig.html">Multi-Instance GPU</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/driver-containers/overview.html">Driver Containers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">driver-containers</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
<li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
<li>Overview</li>
<li class="wy-breadcrumbs-aside">

  <span>&nbsp;</span>
</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h1>
<a class="reference internal image-reference" href="_images/nvidia-driver-container-image.png"><img alt="_images/nvidia-driver-container-image.png" src="_images/nvidia-driver-container-image.png" style="width: 500px;" /></a>
<p>The NVIDIA GPU driver container allows the provisioning of the <a class="reference external" href="https://www.nvidia.com/Download/index.aspx?lang=en-us">NVIDIA driver</a>
through the use of containers. This provides a few benefits over a standard driver installation, for example:</p>
<ul class="simple">
<li><p>Ease of deployment</p></li>
<li><p>Fast installation</p></li>
<li><p>Reproducibility</p></li>
</ul>
<p>The driver container can be used in standard Linux distributions and container operating system distributions
such as Red Hat CoreOS, Flatcar Linux or others that have immutable read-only file systems.</p>
<p>For more details on the internals of the driver container, see this <a class="reference external" href="https://docs.google.com/presentation/d/1NY4X2K6BMaByfnF9rMEcNq6hS3NtmOKGTfihZ44zfrw/edit?usp=sharing">presentation</a>.</p>
<hr class="docutils" />
<section id="pre-requisites">
<h2>Pre-requisites<a class="headerlink" href="#pre-requisites" title="Permalink to this headline"></a></h2>
<p>The list of prerequisites for running a driver container is described below:</p>
<ul class="simple">
<li><p>Ubuntu 16.04, Ubuntu 18.04 or Centos 7 with the IPMI driver enabled and the Nouveau driver disabled</p></li>
<li><p>NVIDIA GPU with Architecture &gt; Fermi (2.1)</p></li>
<li><p>The <a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/overview.html">NVIDIA Container Toolkit for Docker</a> configured with the <code class="docutils literal notranslate"><span class="pre">root</span></code> option. See below for configuration.</p></li>
<li><p>If you are running Ubuntu 18.04 with an AWS kernel, you also need to enable the <code class="docutils literal notranslate"><span class="pre">i2c_core</span></code> kernel module</p></li>
</ul>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline"></a></h2>
<p>You will need to update the NVIDIA Container Toolkit config file (<code class="docutils literal notranslate"><span class="pre">/etc/nvidia-container-runtime/config.toml</span></code>) so that the <code class="docutils literal notranslate"><span class="pre">root</span></code> directive points to the driver container as shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">disable-require = false</span>
<span class="gp">#</span>swarm-resource <span class="o">=</span> <span class="s2">&quot;DOCKER_RESOURCE_GPU&quot;</span>

<span class="go">[nvidia-container-cli]</span>
<span class="go">root = &quot;/run/nvidia/driver&quot;</span>
<span class="gp">#</span><span class="nv">path</span> <span class="o">=</span> <span class="s2">&quot;/usr/bin/nvidia-container-cli&quot;</span>
<span class="go">environment = []</span>
<span class="gp">#</span><span class="nv">debug</span> <span class="o">=</span> <span class="s2">&quot;/var/log/nvidia-container-toolkit.log&quot;</span>
<span class="gp">#</span><span class="nv">ldcache</span> <span class="o">=</span> <span class="s2">&quot;/etc/ld.so.cache&quot;</span>
<span class="go">load-kmods = true</span>
<span class="gp">#</span>no-cgroups <span class="o">=</span> <span class="nb">false</span>
<span class="gp">#</span><span class="nv">user</span> <span class="o">=</span> <span class="s2">&quot;root:video&quot;</span>
<span class="go">ldconfig = &quot;@/sbin/ldconfig.real&quot;</span>

<span class="go">[nvidia-container-runtime]</span>
<span class="gp">#</span><span class="nv">debug</span> <span class="o">=</span> <span class="s2">&quot;/var/log/nvidia-container-runtime.log&quot;</span>
</pre></div>
</div>
</section>
<section id="quickstart">
<h2>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline"></a></h2>
<section id="ubuntu-18-04">
<h3>Ubuntu 18.04<a class="headerlink" href="#ubuntu-18-04" title="Permalink to this headline"></a></h3>
<p>Follow the <a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html">guide</a> to get started with the NVIDIA Container Toolkit for Docker.</p>
<p>Now modify the configuration to update the <code class="docutils literal notranslate"><span class="pre">root</span></code> directive:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo sed -i <span class="s1">&#39;s/^#root/root/&#39;</span> /etc/nvidia-container-runtime/config.toml
</pre></div>
</div>
<p>Disable the Nouveau driver modules:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo tee /etc/modules-load.d/ipmi.conf <span class="o">&lt;&lt;&lt;</span> <span class="s2">&quot;ipmi_msghandler&quot;</span> <span class="se">\</span>
  <span class="o">&amp;&amp;</span> sudo tee /etc/modprobe.d/blacklist-nouveau.conf <span class="o">&lt;&lt;&lt;</span> <span class="s2">&quot;blacklist nouveau&quot;</span> <span class="se">\</span>
  <span class="o">&amp;&amp;</span> sudo tee -a /etc/modprobe.d/blacklist-nouveau.conf <span class="o">&lt;&lt;&lt;</span> <span class="s2">&quot;options nouveau modeset=0&quot;</span>
</pre></div>
</div>
<p>If using an AWS kernel, ensure that the <code class="docutils literal notranslate"><span class="pre">i2c_core</span></code> kernel module is enabled:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo tee /etc/modules-load.d/ipmi.conf <span class="o">&lt;&lt;&lt;</span> <span class="s2">&quot;i2c_core&quot;</span>
</pre></div>
</div>
<p>Update the <code class="docutils literal notranslate"><span class="pre">initramfs</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo update-initramfs -u
</pre></div>
</div>
<p>Optionally, if the kernel is not up to date</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo apt-get dist-upgrade
</pre></div>
</div>
<p>Reboot your system (or VM) if required:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo reboot
</pre></div>
</div>
<p>Run the driver container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo docker run --name nvidia-driver -d --privileged --pid<span class="o">=</span>host <span class="se">\</span>
  -v /run/nvidia:/run/nvidia:shared <span class="se">\</span>
  -v /var/log:/var/log <span class="se">\</span>
  --restart<span class="o">=</span>unless-stopped <span class="se">\</span>
  nvidia/driver:450.80.02-ubuntu18.04
</pre></div>
</div>
<p>Once the driver container is running, try running a GPU container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo docker run --gpus all nvidia/cuda:11.0-base nvidia-smi
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/driver-container-demo.gif"><img alt="_images/driver-container-demo.gif" src="_images/driver-container-demo.gif" style="width: 1440px;" /></a>
</section>
</section>
<section id="container-images">
<h2>Container Images<a class="headerlink" href="#container-images" title="Permalink to this headline"></a></h2>
<p>Driver containers are released for the NVIDIA datacenter driver <a class="reference external" href="https://docs.nvidia.com/datacenter/tesla/index.html">releases</a>.</p>
<p>The following tags are available on both <a class="reference external" href="https://hub.docker.com/r/nvidia/driver/">NVIDIA DockerHub</a> and <a class="reference external" href="https://ngc.nvidia.com/containers/nvidia:driver">NGC</a>.</p>
</section>
<section id="licenses-and-contributing">
<h2>Licenses and Contributing<a class="headerlink" href="#licenses-and-contributing" title="Permalink to this headline"></a></h2>
<p>By downloading and using the driver container, you accept the terms and conditions of these licenses:</p>
<ul class="simple">
<li><p>NVIDIA Driver
The license for the NVIDIA datacenter drivers is available at this <a class="reference external" href="https://www.nvidia.com/content/DriverDownload-March2009/licence.php?lang=us">link</a>.</p></li>
</ul>
<p>Since the underlying images may include components licensed under open-source licenses such as GPL,
the sources for these components are archived on the CUDA opensource <a class="reference external" href="https://developer.download.nvidia.com/compute/cuda/opensource/">index</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023, NVIDIA.
      <span class="lastupdated">Last updated on Mar 06, 2023.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>